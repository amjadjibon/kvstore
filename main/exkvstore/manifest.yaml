version: "1"

capabilities:
  - contract_id: "abesh:httpserver2"
    values:
      host: "0.0.0.0"
      port: "8080"
      default_request_timeout: "1s"
      default_content_type: "application/json"
      default_404_handler_enabled: "true"

      s500m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"Server error\",\"data\": {}}"
      s404m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"404 error\",\"data\": {}}"
      s403m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"403 error\",\"data\": {}}"
      s405m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"405 error\",\"data\": {}}"
      s408m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"Request timeout\",\"data\": {}}"
      s499m: "{\"code\": \"SE\",\"lang\": \"en\",\"message\": \"499 error\",\"data\": {}}"

  - contract_id: "abesh:kvstore:tikv"
    values:
      pd_addresses: localhost:2379

  - contract_id: "abesh:kvstore:exTiKVSet"

triggers:
  - trigger: "abesh:httpserver2"
    trigger_values:
      method: "POST"
      path: "/golang/kvstore/tikv/set"
    service: "abesh:kvstore:exTiKVSet"

start:
  - "abesh:httpserver2"